fn doubleNotThree(xs: int32[]): int32[] =
    return [x * 2 for x in xs if x != 3]

fn main(): int32 =
    let xs: int32[] = [1, 2, 3, 4]
    let ys: int32[] = doubleNotThree(xs)
    assert(len(ys) == 3, "list comprehension len failed")
    assert(ys[0] == 2, "list comprehension idx0 failed")
    assert(ys[1] == 4, "list comprehension idx1 failed")
    assert(ys[2] == 8, "list comprehension idx2 failed")

    var zs: int32[] = []
    zs = [x for x in xs if x > 100]
    assert(len(zs) == 0, "list comprehension empty failed")
    zs = []
    assert(len(zs) == 0, "list reset empty failed")
    return 0

