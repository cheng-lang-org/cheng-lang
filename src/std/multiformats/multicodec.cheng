# MultiCodec registry(minimal scaffold).

import std/result
import std/strings

type
    MultiCodec =
        name: str
        code: int64

fn codecItem(name: str, code: int64): MultiCodec =
    MultiCodec(name: name, code: code)

var
    codecRaw: MultiCodec = codecItem("raw", 0x55)
    codecIdentity: MultiCodec = codecItem("identity", 0x00)
    codecDagPb: MultiCodec = codecItem("dag-pb", 0x70)
    codecDagCbor: MultiCodec = codecItem("dag-cbor", 0x71)
    codecLibp2pKey: MultiCodec = codecItem("libp2p-key", 0x72)
    codecGitRaw: MultiCodec = codecItem("git-raw", 0x78)
    codecTorrentInfo: MultiCodec = codecItem("torrent-info", 0x7B)
    codecTorrentFile: MultiCodec = codecItem("torrent-file", 0x7C)
    codecEthBlock: MultiCodec = codecItem("eth-block", 0x90)
    codecEthBlockList: MultiCodec = codecItem("eth-block-list", 0x91)
    codecEthTxTrie: MultiCodec = codecItem("eth-tx-trie", 0x92)
    codecEthTx: MultiCodec = codecItem("eth-tx", 0x93)
    codecEthTxReceiptTrie: MultiCodec = codecItem("eth-tx-receipt-trie", 0x94)
    codecEthTxReceipt: MultiCodec = codecItem("eth-tx-receipt", 0x95)
    codecEthStateTrie: MultiCodec = codecItem("eth-state-trie", 0x96)
    codecEthAccountSnapshot: MultiCodec = codecItem("eth-account-snapshot", 0x97)
    codecEthStorageTrie: MultiCodec = codecItem("eth-storage-trie", 0x98)
    codecBitcoinBlock: MultiCodec = codecItem("bitcoin-block", 0xB0)
    codecBitcoinTx: MultiCodec = codecItem("bitcoin-tx", 0xB1)
    codecZcashBlock: MultiCodec = codecItem("zcash-block", 0xC0)
    codecZcashTx: MultiCodec = codecItem("zcash-tx", 0xC1)
    codecStellarBlock: MultiCodec = codecItem("stellar-block", 0xD0)
    codecStellarTx: MultiCodec = codecItem("stellar-tx", 0xD1)
    codecDecredBlock: MultiCodec = codecItem("decred-block", 0xE0)
    codecDecredTx: MultiCodec = codecItem("decred-tx", 0xE1)
    codecDashBlock: MultiCodec = codecItem("dash-block", 0xF0)
    codecDashTx: MultiCodec = codecItem("dash-tx", 0xF1)
    codecDagJson: MultiCodec = codecItem("dag-json", 0x0129)
    codecSha1: MultiCodec = codecItem("sha1", 0x11)
    codecSha2_256: MultiCodec = codecItem("sha2-256", 0x12)
    codecSha2_512: MultiCodec = codecItem("sha2-512", 0x13)
    codecEd25519Pub: MultiCodec = codecItem("ed25519-pub", 0xED)

fn multiCodec(name: str): Result[MultiCodec] =
    if name == "raw": return Ok[MultiCodec](codecItem("raw", 0x55))
    if name == "identity": return Ok[MultiCodec](codecItem("identity", 0x00))
    if name == "multicodec": return Ok[MultiCodec](codecItem("multicodec", 0x30))
    if name == "multihash": return Ok[MultiCodec](codecItem("multihash", 0x31))
    if name == "multiaddr": return Ok[MultiCodec](codecItem("multiaddr", 0x32))
    if name == "multibase": return Ok[MultiCodec](codecItem("multibase", 0x33))
    if name == "dag-pb": return Ok[MultiCodec](codecItem("dag-pb", 0x70))
    if name == "dag-cbor": return Ok[MultiCodec](codecItem("dag-cbor", 0x71))
    if name == "libp2p-key": return Ok[MultiCodec](codecItem("libp2p-key", 0x72))
    if name == "git-raw": return Ok[MultiCodec](codecItem("git-raw", 0x78))
    if name == "torrent-info": return Ok[MultiCodec](codecItem("torrent-info", 0x7B))
    if name == "torrent-file": return Ok[MultiCodec](codecItem("torrent-file", 0x7C))
    if name == "eth-block": return Ok[MultiCodec](codecItem("eth-block", 0x90))
    if name == "eth-block-list": return Ok[MultiCodec](codecItem("eth-block-list", 0x91))
    if name == "eth-tx-trie": return Ok[MultiCodec](codecItem("eth-tx-trie", 0x92))
    if name == "eth-tx": return Ok[MultiCodec](codecItem("eth-tx", 0x93))
    if name == "eth-tx-receipt-trie": return Ok[MultiCodec](codecItem("eth-tx-receipt-trie", 0x94))
    if name == "eth-tx-receipt": return Ok[MultiCodec](codecItem("eth-tx-receipt", 0x95))
    if name == "eth-state-trie": return Ok[MultiCodec](codecItem("eth-state-trie", 0x96))
    if name == "eth-account-snapshot": return Ok[MultiCodec](codecItem("eth-account-snapshot", 0x97))
    if name == "eth-storage-trie": return Ok[MultiCodec](codecItem("eth-storage-trie", 0x98))
    if name == "bitcoin-block": return Ok[MultiCodec](codecItem("bitcoin-block", 0xB0))
    if name == "bitcoin-tx": return Ok[MultiCodec](codecItem("bitcoin-tx", 0xB1))
    if name == "zcash-block": return Ok[MultiCodec](codecItem("zcash-block", 0xC0))
    if name == "zcash-tx": return Ok[MultiCodec](codecItem("zcash-tx", 0xC1))
    if name == "stellar-block": return Ok[MultiCodec](codecItem("stellar-block", 0xD0))
    if name == "stellar-tx": return Ok[MultiCodec](codecItem("stellar-tx", 0xD1))
    if name == "decred-block": return Ok[MultiCodec](codecItem("decred-block", 0xE0))
    if name == "decred-tx": return Ok[MultiCodec](codecItem("decred-tx", 0xE1))
    if name == "dash-block": return Ok[MultiCodec](codecItem("dash-block", 0xF0))
    if name == "dash-tx": return Ok[MultiCodec](codecItem("dash-tx", 0xF1))
    if name == "dag-json": return Ok[MultiCodec](codecItem("dag-json", 0x0129))
    if name == "sha1": return Ok[MultiCodec](codecItem("sha1", 0x11))
    if name == "sha2-256": return Ok[MultiCodec](codecItem("sha2-256", 0x12))
    if name == "sha2-512": return Ok[MultiCodec](codecItem("sha2-512", 0x13))
    if name == "ed25519-pub": return Ok[MultiCodec](codecItem("ed25519-pub", 0xED))
    if name == "ip4": return Ok[MultiCodec](codecItem("ip4", 0x04))
    if name == "ip6": return Ok[MultiCodec](codecItem("ip6", 0x29))
    if name == "ip6zone": return Ok[MultiCodec](codecItem("ip6zone", 0x2A))
    if name == "dccp": return Ok[MultiCodec](codecItem("dccp", 0x21))
    if name == "sctp": return Ok[MultiCodec](codecItem("sctp", 0x84))
    if name == "udt": return Ok[MultiCodec](codecItem("udt", 0x012D))
    if name == "utp": return Ok[MultiCodec](codecItem("utp", 0x012E))
    if name == "tcp": return Ok[MultiCodec](codecItem("tcp", 0x06))
    if name == "udp": return Ok[MultiCodec](codecItem("udp", 0x0111))
    if name == "dns": return Ok[MultiCodec](codecItem("dns", 0x35))
    if name == "dns4": return Ok[MultiCodec](codecItem("dns4", 0x36))
    if name == "dns6": return Ok[MultiCodec](codecItem("dns6", 0x37))
    if name == "dnsaddr": return Ok[MultiCodec](codecItem("dnsaddr", 0x38))
    if name == "unix": return Ok[MultiCodec](codecItem("unix", 0x0190))
    if name == "http": return Ok[MultiCodec](codecItem("http", 0x01E0))
    if name == "https": return Ok[MultiCodec](codecItem("https", 0x01BB))
    if name == "tls": return Ok[MultiCodec](codecItem("tls", 0x01C0))
    if name == "quic": return Ok[MultiCodec](codecItem("quic", 0x01CC))
    if name == "quic-v1": return Ok[MultiCodec](codecItem("quic-v1", 0x01CD))
    if name == "webtransport": return Ok[MultiCodec](codecItem("webtransport", 0x01D1))
    if name == "certhash": return Ok[MultiCodec](codecItem("certhash", 0x01D2))
    if name == "ws": return Ok[MultiCodec](codecItem("ws", 0x01DD))
    if name == "wss": return Ok[MultiCodec](codecItem("wss", 0x01DE))
    if name == "p2p-circuit": return Ok[MultiCodec](codecItem("p2p-circuit", 0x0122))
    if name == "p2p-websocket-star": return Ok[MultiCodec](codecItem("p2p-websocket-star", 0x01DF))
    if name == "p2p-webrtc-star": return Ok[MultiCodec](codecItem("p2p-webrtc-star", 0x0113))
    if name == "p2p-webrtc-direct": return Ok[MultiCodec](codecItem("p2p-webrtc-direct", 0x0114))
    if name == "webrtc-direct": return Ok[MultiCodec](codecItem("webrtc-direct", 0x0118))
    if name == "onion": return Ok[MultiCodec](codecItem("onion", 0x01BC))
    if name == "onion3": return Ok[MultiCodec](codecItem("onion3", 0x01BD))
    if name == "ipfs": return Ok[MultiCodec](codecItem("ipfs", 0xE3))
    if name == "p2p": return Ok[MultiCodec](codecItem("p2p", 0x01A5))
    if name == "memory": return Ok[MultiCodec](codecItem("memory", 0x0309))
    return Err[MultiCodec]("multicodec: unknown codec")

fn codecByCode(code: int64): Result[MultiCodec] =
    if code == 0x55: return Ok[MultiCodec](codecItem("raw", 0x55))
    if code == 0x00: return Ok[MultiCodec](codecItem("identity", 0x00))
    if code == 0x30: return Ok[MultiCodec](codecItem("multicodec", 0x30))
    if code == 0x31: return Ok[MultiCodec](codecItem("multihash", 0x31))
    if code == 0x32: return Ok[MultiCodec](codecItem("multiaddr", 0x32))
    if code == 0x33: return Ok[MultiCodec](codecItem("multibase", 0x33))
    if code == 0x70: return Ok[MultiCodec](codecItem("dag-pb", 0x70))
    if code == 0x71: return Ok[MultiCodec](codecItem("dag-cbor", 0x71))
    if code == 0x72: return Ok[MultiCodec](codecItem("libp2p-key", 0x72))
    if code == 0x78: return Ok[MultiCodec](codecItem("git-raw", 0x78))
    if code == 0x7B: return Ok[MultiCodec](codecItem("torrent-info", 0x7B))
    if code == 0x7C: return Ok[MultiCodec](codecItem("torrent-file", 0x7C))
    if code == 0x90: return Ok[MultiCodec](codecItem("eth-block", 0x90))
    if code == 0x91: return Ok[MultiCodec](codecItem("eth-block-list", 0x91))
    if code == 0x92: return Ok[MultiCodec](codecItem("eth-tx-trie", 0x92))
    if code == 0x93: return Ok[MultiCodec](codecItem("eth-tx", 0x93))
    if code == 0x94: return Ok[MultiCodec](codecItem("eth-tx-receipt-trie", 0x94))
    if code == 0x95: return Ok[MultiCodec](codecItem("eth-tx-receipt", 0x95))
    if code == 0x96: return Ok[MultiCodec](codecItem("eth-state-trie", 0x96))
    if code == 0x97: return Ok[MultiCodec](codecItem("eth-account-snapshot", 0x97))
    if code == 0x98: return Ok[MultiCodec](codecItem("eth-storage-trie", 0x98))
    if code == 0xB0: return Ok[MultiCodec](codecItem("bitcoin-block", 0xB0))
    if code == 0xB1: return Ok[MultiCodec](codecItem("bitcoin-tx", 0xB1))
    if code == 0xC0: return Ok[MultiCodec](codecItem("zcash-block", 0xC0))
    if code == 0xC1: return Ok[MultiCodec](codecItem("zcash-tx", 0xC1))
    if code == 0xD0: return Ok[MultiCodec](codecItem("stellar-block", 0xD0))
    if code == 0xD1: return Ok[MultiCodec](codecItem("stellar-tx", 0xD1))
    if code == 0xE0: return Ok[MultiCodec](codecItem("decred-block", 0xE0))
    if code == 0xE1: return Ok[MultiCodec](codecItem("decred-tx", 0xE1))
    if code == 0xF0: return Ok[MultiCodec](codecItem("dash-block", 0xF0))
    if code == 0xF1: return Ok[MultiCodec](codecItem("dash-tx", 0xF1))
    if code == 0x0129: return Ok[MultiCodec](codecItem("dag-json", 0x0129))
    if code == 0x11: return Ok[MultiCodec](codecItem("sha1", 0x11))
    if code == 0x12: return Ok[MultiCodec](codecItem("sha2-256", 0x12))
    if code == 0x13: return Ok[MultiCodec](codecItem("sha2-512", 0x13))
    if code == 0xED: return Ok[MultiCodec](codecItem("ed25519-pub", 0xED))
    if code == 0x04: return Ok[MultiCodec](codecItem("ip4", 0x04))
    if code == 0x29: return Ok[MultiCodec](codecItem("ip6", 0x29))
    if code == 0x2A: return Ok[MultiCodec](codecItem("ip6zone", 0x2A))
    if code == 0x21: return Ok[MultiCodec](codecItem("dccp", 0x21))
    if code == 0x84: return Ok[MultiCodec](codecItem("sctp", 0x84))
    if code == 0x012D: return Ok[MultiCodec](codecItem("udt", 0x012D))
    if code == 0x012E: return Ok[MultiCodec](codecItem("utp", 0x012E))
    if code == 0x06: return Ok[MultiCodec](codecItem("tcp", 0x06))
    if code == 0x0111: return Ok[MultiCodec](codecItem("udp", 0x0111))
    if code == 0x35: return Ok[MultiCodec](codecItem("dns", 0x35))
    if code == 0x36: return Ok[MultiCodec](codecItem("dns4", 0x36))
    if code == 0x37: return Ok[MultiCodec](codecItem("dns6", 0x37))
    if code == 0x38: return Ok[MultiCodec](codecItem("dnsaddr", 0x38))
    if code == 0x0190: return Ok[MultiCodec](codecItem("unix", 0x0190))
    if code == 0x01E0: return Ok[MultiCodec](codecItem("http", 0x01E0))
    if code == 0x01BB: return Ok[MultiCodec](codecItem("https", 0x01BB))
    if code == 0x01C0: return Ok[MultiCodec](codecItem("tls", 0x01C0))
    if code == 0x01CC: return Ok[MultiCodec](codecItem("quic", 0x01CC))
    if code == 0x01CD: return Ok[MultiCodec](codecItem("quic-v1", 0x01CD))
    if code == 0x01D1: return Ok[MultiCodec](codecItem("webtransport", 0x01D1))
    if code == 0x01D2: return Ok[MultiCodec](codecItem("certhash", 0x01D2))
    if code == 0x01DD: return Ok[MultiCodec](codecItem("ws", 0x01DD))
    if code == 0x01DE: return Ok[MultiCodec](codecItem("wss", 0x01DE))
    if code == 0x0122: return Ok[MultiCodec](codecItem("p2p-circuit", 0x0122))
    if code == 0x01DF: return Ok[MultiCodec](codecItem("p2p-websocket-star", 0x01DF))
    if code == 0x0113: return Ok[MultiCodec](codecItem("p2p-webrtc-star", 0x0113))
    if code == 0x0114: return Ok[MultiCodec](codecItem("p2p-webrtc-direct", 0x0114))
    if code == 0x0118: return Ok[MultiCodec](codecItem("webrtc-direct", 0x0118))
    if code == 0x01BC: return Ok[MultiCodec](codecItem("onion", 0x01BC))
    if code == 0x01BD: return Ok[MultiCodec](codecItem("onion3", 0x01BD))
    if code == 0xE3: return Ok[MultiCodec](codecItem("ipfs", 0xE3))
    if code == 0x01A5: return Ok[MultiCodec](codecItem("p2p", 0x01A5))
    if code == 0x0309: return Ok[MultiCodec](codecItem("memory", 0x0309))
    return Err[MultiCodec]("multicodec: unknown code")

fn codecName(code: int64): Result[str] =
    let codecRes: Result[MultiCodec] = codecByCode(code)
    if IsErr(codecRes):
        return Err[str](Error(codecRes))
    return Ok[str](Value(codecRes).name)
