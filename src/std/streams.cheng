import std/os

type
    Stream = ref
        f: File

fn newFileStream(path: str, mode: FileMode): Stream =
    let f = open(path, mode)
    if f == nil:
        return nil
    var s: Stream
    new s
    s.f = f
    return s

fn write(s: Stream, data: str) =
    if s == nil:
        return
    write(s.f, data)

fn close(s: Stream) =
    if s == nil:
        return
    close s.f

fn isNil(s: Stream): bool =
    return s == nil
