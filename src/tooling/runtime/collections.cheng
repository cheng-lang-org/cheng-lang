fn splitLines(content: str): str[] =
    var out: str[] 
    if len(content) == 0:
        out.add("")
        return out
    var start = 0
    for idx in 0..<len(content):
        let ch = content[idx]
        if ch == '\n':
            out.add(content[start..< idx])
            start = idx + 1
    if start <= len(content) - 1:
        out.add(content[start..len(content) - 1])
    elif start == len(content):
        out.add("")
    out

type
    StripResult =
        text: str
        changed: bool

fn stripTrailingWhitespace(line: str): StripResult =
    var result: StripResult
    if len(line) == 0:
        result.text = line
        result.changed = false
        return result
    var last = len(line) - 1
    if last >= 0:
        for __for_rev_last in 0..last:
            if !(line[last] == ' ' || line[last] == '\t'):
                break
            last = last - 1
    if last == len(line) - 1:
        result.text = line
        result.changed = false
    elif last < 0:
        result.text = ""
        result.changed = true
    else:
        result.text = line[0..last]
        result.changed = true
    result
