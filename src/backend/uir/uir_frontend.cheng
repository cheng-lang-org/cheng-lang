# UIR frontend facade.
import std/result
import cheng/backend/uir/uir_types
import cheng/backend/uir/uir_internal/uir_core_builder
import cheng/backend/uir/uir_internal/uir_core_types

fn uirFrontendBuildModuleFromFile(path: str): Result[UirModule] =
    let res: Result[UirCoreModule] = uirCoreBuildModuleFromFile(path)
    if !IsOk[UirCoreModule](res):
        return ErrInfo[UirModule](ErrorInfoOf[UirCoreModule](res))
    var out: Result[UirModule]
    out.ok = true
    out.value = UirModule(Value[UirCoreModule](res))
    out.err = ErrorOk()
    return out

fn uirFrontendBuildModuleFromFileStage1(path: str): Result[UirModule] =
    let res: Result[UirCoreModule] = uirCoreBuildModuleFromFileStage1(path)
    if !IsOk[UirCoreModule](res):
        return ErrInfo[UirModule](ErrorInfoOf[UirCoreModule](res))
    var out: Result[UirModule]
    out.ok = true
    out.value = UirModule(Value[UirCoreModule](res))
    out.err = ErrorOk()
    return out
