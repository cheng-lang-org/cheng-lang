# UIR pass manager facade (phase-1): centralized optimization scheduling knobs.
import backend/uir/uir_types
import backend/uir/uir_vectorize_loop
import backend/uir/uir_vectorize_slp

fn uirRunLateVectorPasses(module: UirModule, optLevel: int32, simdEnabled: bool,
                          simdMaxWidth: int32, simdPolicy: str): bool =
    if module == nil:
        return false
    if optLevel < 3:
        return false
    if !simdEnabled:
        return false
    var changed: bool = false
    if uirVectorizeLoops(module, simdMaxWidth, simdPolicy):
        changed = true
    if uirVectorizeSlp(module, simdMaxWidth, simdPolicy):
        changed = true
    return changed
