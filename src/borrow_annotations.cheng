import cheng/ast
type
    BorrowAnnotation =
        captureName: str
        scopePath: str
        annotation: str
        pos: SourcePos
type
    BorrowAnnotationBuffer = ref
        annotations: BorrowAnnotation[]
fn newBorrowAnnotationBuffer(): BorrowAnnotationBuffer =
    var buf: BorrowAnnotationBuffer
    new(buf)
    buf.annotations = []
fn add(buf: BorrowAnnotationBuffer, ann: BorrowAnnotation) =
    if buf == nil:
        return buf.annotations.add(ann)
fn toSeq(buf: BorrowAnnotationBuffer): BorrowAnnotation[] =
    if buf == nil:
        return []
