import cheng/web/runtime/abi

fn webStrLen(s: str): int32 =
    if s == nil:
        return 0
    return len(s)

fn domCreateElement(tag: str): WebNode =
    if tag == nil:
        return 0
    return dom_create_element(tag, webStrLen(tag))

fn domCreateText(text: str): WebNode =
    if text == nil:
        return 0
    return dom_create_text(text, webStrLen(text))

fn domGetRoot(): WebNode =
    return dom_get_root()

fn domQuerySelector(selector: str): WebNode =
    if selector == nil:
        return 0
    return dom_query_selector(selector, webStrLen(selector))

fn domSetAttr(node: WebNode, name: str, value: str) =
    if name == nil:
        return
    dom_set_attr(node, name, webStrLen(name), value, webStrLen(value))

fn domSetProp(node: WebNode, name: str, value: str) =
    if name == nil:
        return
    dom_set_prop(node, name, webStrLen(name), value, webStrLen(value))

fn domSetStyle(node: WebNode, name: str, value: str) =
    if name == nil:
        return
    dom_set_style(node, name, webStrLen(name), value, webStrLen(value))

fn domTextSet(node: WebNode, text: str) =
    dom_text_set(node, text, webStrLen(text))

fn domInsert(parent: WebNode, node: WebNode, anchor: WebNode) =
    dom_insert(parent, node, anchor)

fn domAppend(parent: WebNode, node: WebNode) =
    dom_insert(parent, node, 0)

fn domRemove(node: WebNode) =
    dom_remove(node)

fn domReplace(oldNode: WebNode, newNode: WebNode) =
    dom_replace(oldNode, newNode)

fn domAddEvent(node: WebNode, name: str, handler: WebHandler) =
    if name == nil:
        return
    dom_add_event(node, name, webStrLen(name), handler)

fn domRemoveEvent(node: WebNode, name: str, handler: WebHandler) =
    if name == nil:
        return
    dom_remove_event(node, name, webStrLen(name), handler)
