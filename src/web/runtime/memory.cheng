# Web runtime memory helpers

fn readString(ptr: void*, len: int32): str =
    if ptr == nil || len <= 0:
        return ""
    let out: void* = alloc(len + 1)
    copyMem(out, ptr, len)
    setMem(ptr_add(out, len), 0, 1)
    return str(out)

fn safeLen(s: str): int32 =
    if s == nil:
        return 0
    return len(s)
